<!DOCTYPE html>
<html>

<head>

  <link type="text/css" rel ="stylesheet" href = "styles.css"/>

</head>

<body class = "grad">

  <div id = "header-menu" class = "hidden">
    <h1 id = "header-title"> Econergize </h1>
    <div id = "profile" class = "hidden">
      <p id="welcome"></p>
      <img id="picture"></img>
    </div>
  </div>

  <div id = "main-body"/>

  <div id = "right-panel">
    <div id="login-button"/>
  </div>

  <script>
      window.snapKitInit = () => {
        snap.loginkit.mountButton("login-button", {
          clientId: "5414d722-7487-4d5b-9a92-221ccf07da6e",
          redirectURI: "http://localhost:5000",
          scopeList: [
            "user.display_name",
            "user.bitmoji.avatar",
          ],
          handleResponseCallback: () => {
            snap.loginkit.fetchUserInfo().then(data => {
              document.getElementById("login-button").classList.add("hidden")
              document.getElementById("profile").classList.remove("hidden")
              document.getElementById("picture").src = data["data"]["me"]["bitmoji"]["avatar"]
              document.getElementById("welcome").appendChild(document.createTextNode("Welcome, " + data["data"]["me"]["displayName"] + "!"))
              console.log("Welcome, " + data["data"]["me"]["displayName"] + "!");
            })
          },
        })
      }
      // Load the SDK asynchronously
      (function (d, s, id) {
        var js, sjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "https://sdk.snapkit.com/js/v1/login.js";
        sjs.parentNode.insertBefore(js, sjs);
      }(document, "script", "loginkit-sdk"));
    </script>
    
  <script src="https://www.gstatic.com/firebasejs/5.9.4/firebase.js"></script>
	<script src="firebaseInit.js" charset="utf-8"></script>
  <script src = "index.js"></script>

</body>

</html>
